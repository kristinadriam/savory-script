# pgbench Benchmarking Script

## что тестируется

скрипт тестирует следующие аспекты производительности PostgreSQL:

1. **масштаб базы данных (scale):** измеряет время выполнения операций с увеличивающимся объемом данных.
2. **количество транзакций (transactions):** оценивает производительность при увеличении числа транзакций, исполняемых каждым клиентом.
3. **количество клиентов (Clients):** проверяет производительность при увеличении параллельности запросов к базе данных.

каждое тестирование определяет показатели транзакций в секунду (TPS) и среднюю задержку (latency) для заданной конфигурации.

## как настраивать скрипт

- *Scale:* управляется переменными `INITIAL_SCALE`, `SCALE_STEP` и `MAX_SCALE`. эти переменные задают начальный масштаб, шаг увеличения и максимальный масштаб для тестирования.
- *Transactions:* задают объём операций на одного клиента, управляется с помощью `INITIAL_TRANSACTIONS`, `TRANSACTION_STEP` и `MAX_TRANSACTIONS`.
- *Clients:* определяет параллельность с переменными `INITIAL_CLIENTS`, `CLIENT_STEP` и `MAX_CLIENTS`.
- *Maximum Latency:* `MAX_LATENCY` указывает на максимальную допустимую среднюю задержку для тестов. значения выше этой границы считаются ошибочными.

## результаты тестирования

результаты выполнения записываются в файл по пути `/results/pgbench_results.txt`. результаты включают:

- показатели производительности TPS и среднюю задержку для каждой конфигурации.
- сообщения об ошибках, если латентность превышает допустимый уровень или если любая операция сбойна.
- общее количество неудачных тестов отображается в конце.

в случае ненулевого количества неудачных тестов скрипт завершит свое исполнение с ненулевым кодом.
